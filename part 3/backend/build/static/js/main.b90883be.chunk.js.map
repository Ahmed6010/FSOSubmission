{"version":3,"sources":["Modules/dataService.js","Components/App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Filter","func","onChange","PersonForm","submitFunc","name","num","func1","func2","onSubmit","value","type","Notification","message","color","Style","fontStyle","fontSize","background","borderStyle","borderRadius","padding","style","App","useState","persons","setPersons","newName","setNewName","newNum","setNewNum","oldName","setOldName","errorMessage","setErrorMessage","successMessage","setSuccessMessage","useEffect","dataService","event","target","preventDefault","newPerson","number","nameExist","find","person","existId","window","confirm","returnedPerson","map","setTimeout","catch","error","filter","n","concat","startsWith","toLowerCase","onClick","handleDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b90883be.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    return axios.get(baseUrl).then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    return axios.post(baseUrl, newObject).then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    return axios.put(`${baseUrl}/${id}`, newObject).then(response => response.data)\r\n}\r\n\r\nconst delet = id => {\r\n    return axios.delete(`${baseUrl}/${id}`).then(response => response.data)\r\n}\r\n\r\nexport default {getAll, create, update, delet} ","import React, { useState, useEffect } from 'react'\r\nimport dataService from '../Modules/dataService'\r\n\r\nconst Filter = ({func}) => {\r\n  return (\r\n    <>\r\n      <p>filter shown with </p>\r\n      <input onChange={func}/>\r\n    </>\r\n  )\r\n}\r\n\r\nconst PersonForm  = ({submitFunc, name, num, func1, func2}) => {\r\n  return (\r\n    <form onSubmit={submitFunc}>\r\n        <div>\r\n          name: <input value={name} onChange={func1}/>\r\n        </div>\r\n        <div>\r\n          number: <input  value={num} onChange={func2}/>\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n  </form>\r\n  ) \r\n}\r\n\r\nconst Notification = ({ message, color }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  const Style = {\r\n    color: color,\r\n    fontStyle: 'italic',\r\n    fontSize: 20,\r\n    background: 'lightgrey',\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10\r\n  }\r\n\r\n  return (\r\n    <div style={Style}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNum, setNewNum ] = useState('')\r\n  const [ oldName, setOldName ] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n  const [successMessage, setSuccessMessage] = useState(null)\r\n\r\n\r\n  const addName = (event)=>{\r\n    event.preventDefault()\r\n    const newPerson = {\r\n        name : newName,\r\n        number : newNum\r\n    }\r\n\r\n    const nameExist = persons.find(person => person.name === newName)     \r\n    \r\n    // Checking if the name is exist\r\n    if(nameExist) {\r\n        const existId = nameExist.id;\r\n        if (window.confirm(`${nameExist.name} is already added to phonebook, replace the old number with a new one ?`)){\r\n          dataService\r\n            .update(existId,{...newPerson, id:existId})\r\n            .then(returnedPerson => {\r\n              setSuccessMessage(`Updated ${returnedPerson.name}`)\r\n              setPersons(persons.map(person =>  person.id !== existId ? person : returnedPerson ))\r\n              setNewName('')\r\n              setNewNum('') \r\n              setTimeout(() => {\r\n                setSuccessMessage(null)\r\n              }, 5000);\r\n            })\r\n            .catch(error => {\r\n              setErrorMessage(`Information of ${nameExist.name} has already been removed from server`)\r\n              setTimeout(() => {\r\n                setErrorMessage(null)\r\n              }, 5000);\r\n              setPersons(persons.filter(n => n.id !== nameExist.id))\r\n            })\r\n        }\r\n      }\r\n    // adding new person  \r\n    else{    \r\n      dataService\r\n        .create(newPerson)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(newPerson))\r\n          setSuccessMessage(`Added ${returnedPerson.name}`)  \r\n          setNewName('')\r\n          setNewNum('')\r\n          setTimeout(() => {\r\n            setSuccessMessage(null)\r\n          }, 5000);\r\n        })\r\n        .catch(error => {\r\n          setErrorMessage(error.response.data.error)\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000);\r\n        })\r\n    } \r\n  }\r\n\r\n  const handleNameInput = event => setNewName(event.target.value)\r\n  const handleNumInput = event => setNewNum(event.target.value)\r\n  const handleSearchInput = event => setOldName(event.target.value)\r\n  const handleDelete = (person) => {\r\n    if (window.confirm(`Delete ${person.name} ?`)) { \r\n      dataService\r\n        .delet(person.id)\r\n        .then(() => {setPersons(persons.filter(n => n.id !== person.id))})\r\n    }\r\n  }\r\n  \r\n  useEffect( () => {\r\n    dataService\r\n      .getAll().then( data => {setPersons(data)})\r\n  }, [])\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n\r\n      <Notification message={successMessage} color='green'/>\r\n      <Notification message={errorMessage} color='red'/>\r\n\r\n      <Filter func={handleSearchInput} />\r\n      \r\n      <h2>add a new</h2>\r\n\r\n      <PersonForm submitFunc={addName} name={newName} num={newNum} func1={handleNameInput} func2={handleNumInput}/>\r\n\r\n      <h2>Numbers</h2>\r\n\r\n      <ul>\r\n        {persons.map(person => {\r\n          if(person.name.startsWith(oldName) || person.name.toLowerCase().startsWith(oldName)) {\r\n            return <li>\r\n              <span key={person.id}>{person.name} {person.number}   </span>\r\n              <button onClick={() => handleDelete(person)}>delete</button>\r\n            </li>}\r\n          return null                                    \r\n        })}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './Components/App';\n\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}